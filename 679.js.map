{"version":3,"sources":["webpack://pesterchum/./node_modules/irc-framework/dist/browser/src/commands/handlers/user.js","webpack://pesterchum/./node_modules/irc-framework/dist/browser/src/commands/index.js","webpack://pesterchum/./node_modules/irc-framework/dist/browser/src/commands/numerics.js","webpack://pesterchum/./node_modules/irc-framework/dist/browser/src/connection.js","webpack://pesterchum/./node_modules/irc-framework/dist/browser/src/helpers.js"],"names":["require","_","each","handlers","NICK","command","handler","time","getServerTime","emit","nick","ident","hostname","new_nick","params","tags","ACCOUNT","account","CHGHOST","new_ident","new_hostname","SETNAME","new_gecos","AWAY","message","length","self","RPL_NOWAWAY","RPL_UNAWAY","RPL_ISON","nicks","split","ERR_NICKNAMEINUSE","reason","ERR_ERRONEOUSNICKNAME","RPL_ENDOFWHOIS","cache_key","toLowerCase","cache","error","destroy","RPL_AWAY","hasCache","away","RPL_WHOISUSER","real_name","RPL_WHOISHELPOP","helpop","RPL_WHOISBOT","bot","RPL_WHOISSERVER","server","server_info","RPL_WHOISOPERATOR","operator","RPL_WHOISCHANNELS","channels","RPL_WHOISMODES","modes","RPL_WHOISIDLE","idle","logon","RPL_WHOISREGNICK","registered_nick","RPL_WHOISHOST","match","actual_ip","actual_hostname","RPL_WHOISSECURE","secure","RPL_WHOISCERTFP","certfp","RPL_WHOISACCOUNT","RPL_WHOISSPECIAL","special","push","RPL_WHOISCOUNTRY","country","RPL_WHOISACTUALLY","user_host","host","substring","indexOf","ip","RPL_WHOWASUSER","RPL_ENDOFWHOWAS","ERR_WASNOSUCHNICK","RPL_UMODEIS","RPL_HOSTCLOAKING","module","exports","command_controller","handler_command","addHandler","CommandHandler","_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperties","target","props","i","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_possibleConstructorReturn","call","ReferenceError","_assertThisInitialized","_getPrototypeOf","getPrototypeOf","pull","EventEmitter","ircLineParser","_EventEmitter","subClass","superClass","TypeError","create","value","_inherits","Connection","Constructor","protoProps","Derived","hasNativeReflectConstruct","_super","Reflect","construct","sham","Proxy","Date","toString","e","_isNativeReflectConstruct","result","Super","NewTarget","this","arguments","apply","options","_this","instance","_classCallCheck","connected","requested_disconnect","reconnect_attempts","registered","transport","_timers","out","now","that","auto_reconnect","auto_reconnect_max_retries","auto_reconnect_max_wait","clearTimers","removeAllListeners","disposeSocket","encoding","setEncoding","on","debugOut","line","addReadBuffer","err","safely_registered","was_connected","registered_ms_ago","reconnect_wait","calculateExponentialBackoff","attempt","max_retries","wait","setTimeout","connect","jitter","Math","floor","random","attempts","min","pow","from_server","data","callback","writeLine","_setTimeout","tmr","args","Array","slice","_clearTimeout","clearTimeout","_x","forEach","had_error","write","end","close","Helper","parseMask","mask","user","sep1","sep2","splitOnce","input","separator","splitPos"],"mappings":"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hCL,O,sBCAAA,EAAOC,QAAU,CACf,MAAO,cACP,MAAO,eACP,MAAO,cACP,MAAO,aACP,MAAO,eACP,MAAO,cACP,MAAO,aACP,MAAO,cACP,MAAO,UACP,MAAO,aACP,IAAO,gBACP,IAAO,sBACP,IAAO,qBACP,IAAO,mBACP,IAAO,oBACP,IAAO,gBACP,IAAO,kBACP,IAAO,mBACP,IAAO,mBACP,IAAO,iBACP,IAAO,qBACP,IAAO,oBACP,IAAO,oBACP,IAAO,iBACP,IAAO,iBACP,IAAO,iBACP,IAAO,iBACP,IAAO,iBACP,IAAO,iBACP,IAAO,iBACP,IAAO,iBACP,IAAO,cACP,IAAO,kBACP,IAAO,cACP,IAAO,cACP,IAAO,iBACP,IAAO,kBACP,IAAO,oBACP,IAAO,cACP,IAAO,eACP,IAAO,kBACP,IAAO,iBACP,IAAO,kBACP,IAAO,iBACP,IAAO,iBACP,IAAO,iBACP,IAAO,iBACP,IAAO,iBACP,IAAO,iBACP,IAAO,iBACP,IAAO,gBACP,IAAO,kBACP,IAAO,cACP,IAAO,mBACP,IAAO,oBACP,IAAO,cACP,IAAO,cACP,IAAO,gBACP,IAAO,gBACP,IAAO,iBACP,IAAO,iBACP,IAAO,kBACP,IAAO,kBACP,IAAO,cACP,IAAO,aACP,IAAO,cACP,IAAO,WACP,IAAO,WACP,IAAO,eACP,IAAO,aACP,IAAO,cACP,IAAO,mBACP,IAAO,kBACP,IAAO,gBACP,IAAO,kBACP,IAAO,oBACP,IAAO,iBACP,IAAO,eACP,IAAO,gBACP,IAAO,iBACP,IAAO,oBACP,IAAO,mBACP,IAAO,gBACP,IAAO,WACP,IAAO,cACP,IAAO,oBACP,IAAO,kBACP,IAAO,mBACP,IAAO,mBACP,IAAO,cACP,IAAO,YACP,IAAO,mBACP,IAAO,eACP,IAAO,oBACP,IAAO,eACP,IAAO,mBACP,IAAO,iBACP,IAAO,sBACP,IAAO,eACP,IAAO,gBACP,IAAO,gBACP,IAAO,YACP,IAAO,iBACP,IAAO,iBACP,IAAO,cACP,IAAO,mBACP,IAAO,kBACP,IAAO,WACP,IAAO,WACP,IAAO,gBACP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","file":"679.js","sourcesContent":["'use strict';\n\nrequire(\"core-js/modules/es.array.index-of\");\n\nrequire(\"core-js/modules/es.regexp.exec\");\n\nrequire(\"core-js/modules/es.string.match\");\n\nrequire(\"core-js/modules/es.string.split\");\n\nvar _ = {\n  each: require('lodash/each')\n};\nvar handlers = {\n  NICK: function NICK(command, handler) {\n    // Check if we have a server-time\n    var time = command.getServerTime();\n    handler.emit('nick', {\n      nick: command.nick,\n      ident: command.ident,\n      hostname: command.hostname,\n      new_nick: command.params[0],\n      time: time,\n      tags: command.tags\n    });\n  },\n  ACCOUNT: function ACCOUNT(command, handler) {\n    // Check if we have a server-time\n    var time = command.getServerTime();\n    var account = command.params[0] === '*' ? false : command.params[0];\n    handler.emit('account', {\n      nick: command.nick,\n      ident: command.ident,\n      hostname: command.hostname,\n      account: account,\n      time: time,\n      tags: command.tags\n    });\n  },\n  // If the chghost CAP is enabled and 'enable_chghost' option is true\n  CHGHOST: function CHGHOST(command, handler) {\n    // Check if we have a server-time\n    var time = command.getServerTime();\n    handler.emit('user updated', {\n      nick: command.nick,\n      ident: command.ident,\n      hostname: command.hostname,\n      new_ident: command.params[0],\n      new_hostname: command.params[1],\n      time: time,\n      tags: command.tags\n    });\n  },\n  SETNAME: function SETNAME(command, handler) {\n    // Check if we have a server-time\n    var time = command.getServerTime();\n    handler.emit('user updated', {\n      nick: command.nick,\n      ident: command.ident,\n      hostname: command.hostname,\n      new_gecos: command.params[0],\n      time: time,\n      tags: command.tags\n    });\n  },\n  AWAY: function AWAY(command, handler) {\n    // Check if we have a server-time\n    var time = command.getServerTime();\n    var message = command.params[command.params.length - 1] || '';\n\n    if (message === '') {\n      // back\n      handler.emit('back', {\n        self: false,\n        nick: command.nick,\n        message: '',\n        time: time,\n        tags: command.tags\n      });\n    } else {\n      handler.emit('away', {\n        self: false,\n        nick: command.nick,\n        message: message,\n        time: time,\n        tags: command.tags\n      });\n    }\n  },\n  RPL_NOWAWAY: function RPL_NOWAWAY(command, handler) {\n    // Check if we have a server-time\n    var time = command.getServerTime();\n    handler.emit('away', {\n      self: true,\n      nick: command.params[0],\n      message: command.params[1] || '',\n      time: time,\n      tags: command.tags\n    });\n  },\n  RPL_UNAWAY: function RPL_UNAWAY(command, handler) {\n    // Check if we have a server-time\n    var time = command.getServerTime();\n    handler.emit('back', {\n      self: true,\n      nick: command.params[0],\n      message: command.params[1] || '',\n      // example: \"<nick> is now back.\"\n      time: time,\n      tags: command.tags\n    });\n  },\n  RPL_ISON: function RPL_ISON(command, handler) {\n    handler.emit('users online', {\n      nicks: (command.params[command.params.length - 1] || '').split(' '),\n      tags: command.tags\n    });\n  },\n  ERR_NICKNAMEINUSE: function ERR_NICKNAMEINUSE(command, handler) {\n    handler.emit('nick in use', {\n      nick: command.params[1],\n      reason: command.params[command.params.length - 1],\n      tags: command.tags\n    });\n  },\n  ERR_ERRONEOUSNICKNAME: function ERR_ERRONEOUSNICKNAME(command, handler) {\n    handler.emit('nick invalid', {\n      nick: command.params[1],\n      reason: command.params[command.params.length - 1],\n      tags: command.tags\n    });\n  },\n  RPL_ENDOFWHOIS: function RPL_ENDOFWHOIS(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n\n    if (!cache.nick) {\n      cache.nick = command.params[1];\n      cache.error = 'not_found';\n    }\n\n    handler.emit('whois', cache);\n    cache.destroy();\n  },\n  RPL_AWAY: function RPL_AWAY(command, handler) {\n    var cache_key = 'whois.' + command.params[1].toLowerCase();\n    var message = command.params[command.params.length - 1] || 'is away'; // RPL_AWAY may come as a response to PRIVMSG, and not be a part of whois\n    // If so, emit away event separately for it\n\n    if (!handler.hasCache(cache_key)) {\n      // Check if we have a server-time\n      var time = command.getServerTime();\n      handler.emit('away', {\n        self: false,\n        nick: command.params[1],\n        message: message,\n        time: time,\n        tags: command.tags\n      });\n      return;\n    }\n\n    var cache = handler.cache(cache_key);\n    cache.away = message;\n  },\n  RPL_WHOISUSER: function RPL_WHOISUSER(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n    cache.nick = command.params[1];\n    cache.ident = command.params[2];\n    cache.hostname = command.params[3];\n    cache.real_name = command.params[5];\n  },\n  RPL_WHOISHELPOP: function RPL_WHOISHELPOP(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n    cache.helpop = command.params[command.params.length - 1];\n  },\n  RPL_WHOISBOT: function RPL_WHOISBOT(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n    cache.bot = command.params[command.params.length - 1];\n  },\n  RPL_WHOISSERVER: function RPL_WHOISSERVER(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n    cache.server = command.params[2];\n    cache.server_info = command.params[command.params.length - 1];\n  },\n  RPL_WHOISOPERATOR: function RPL_WHOISOPERATOR(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n    cache.operator = command.params[command.params.length - 1];\n  },\n  RPL_WHOISCHANNELS: function RPL_WHOISCHANNELS(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n\n    if (cache.channels) {\n      cache.channels += ' ' + command.params[command.params.length - 1];\n    } else {\n      cache.channels = command.params[command.params.length - 1];\n    }\n  },\n  RPL_WHOISMODES: function RPL_WHOISMODES(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n    cache.modes = command.params[command.params.length - 1];\n  },\n  RPL_WHOISIDLE: function RPL_WHOISIDLE(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n    cache.idle = command.params[2];\n\n    if (command.params[3]) {\n      cache.logon = command.params[3];\n    }\n  },\n  RPL_WHOISREGNICK: function RPL_WHOISREGNICK(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n    cache.registered_nick = command.params[command.params.length - 1];\n  },\n  RPL_WHOISHOST: function RPL_WHOISHOST(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n    var last_param = command.params[command.params.length - 1]; // <source> 378 <target> <nick> :is connecting from <user>@<host> <ip>\n\n    var match = last_param.match(/.*@([^ ]+) ([^ ]+).*$/); // https://regex101.com/r/AQz7RE/2\n\n    if (!match) {\n      return;\n    }\n\n    cache.actual_ip = match[2];\n    cache.actual_hostname = match[1];\n  },\n  RPL_WHOISSECURE: function RPL_WHOISSECURE(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n    cache.secure = true;\n  },\n  RPL_WHOISCERTFP: function RPL_WHOISCERTFP(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n    cache.certfp = command.params[command.params.length - 1];\n  },\n  RPL_WHOISACCOUNT: function RPL_WHOISACCOUNT(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n    cache.account = command.params[2];\n  },\n  RPL_WHOISSPECIAL: function RPL_WHOISSPECIAL(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n    cache.special = cache.special || [];\n    cache.special.push(command.params[command.params.length - 1]);\n  },\n  RPL_WHOISCOUNTRY: function RPL_WHOISCOUNTRY(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n    cache.country = command.params[command.params.length - 1];\n  },\n  RPL_WHOISACTUALLY: function RPL_WHOISACTUALLY(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key); // <source> 338 <target> <nick> <user>@<host> <ip> :Actual user@host, Actual IP\n\n    var user_host = command.params[command.params.length - 3] || '';\n    var host = user_host.substring(user_host.indexOf('@') + 1);\n    var ip = command.params[command.params.length - 2]; // UnrealIRCd uses this numeric for something else resulting in ip+host\n    // to be empty, so ignore this is that's the case\n\n    if (ip && host) {\n      cache.actual_ip = ip;\n      cache.actual_hostname = host;\n    }\n  },\n  RPL_WHOWASUSER: function RPL_WHOWASUSER(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n    cache.nick = command.params[1];\n    cache.ident = command.params[2];\n    cache.hostname = command.params[3];\n    cache.real_name = command.params[command.params.length - 1];\n  },\n  RPL_ENDOFWHOWAS: function RPL_ENDOFWHOWAS(command, handler) {\n    // Because the WHOIS and WHOWAS numerics clash with eachother,\n    // a cache key will have more than what is just in RPL_WHOWASUSER.\n    // This is why we borrow from the whois.* cache key ID.\n    //\n    // This exposes some fields (that may or may not be set).\n    // Valid keys that should always be set: nick, ident, hostname, real_name\n    // Valid optional keys: actual_ip, actual_hostname, account, server,\n    //   server_info\n    // More optional fields MAY exist, depending on the type of ircd.\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key); // Should, in theory, never happen.\n\n    if (!cache.nick) {\n      cache.nick = command.params[1];\n      cache.error = 'no_such_nick';\n    }\n\n    handler.emit('whowas', cache);\n    cache.destroy();\n  },\n  ERR_WASNOSUCHNICK: function ERR_WASNOSUCHNICK(command, handler) {\n    var cache_key = command.params[1].toLowerCase();\n    var cache = handler.cache('whois.' + cache_key);\n    cache.nick = command.params[1];\n    cache.error = 'no_such_nick';\n  },\n  RPL_UMODEIS: function RPL_UMODEIS(command, handler) {// handler.connection.umodes = the modes\n    // TODO: this\n  },\n  RPL_HOSTCLOAKING: function RPL_HOSTCLOAKING(command, handler) {\n    handler.emit('displayed host', {\n      nick: command.params[0],\n      hostname: command.params[1],\n      tags: command.tags\n    });\n  }\n};\n\nmodule.exports = function AddCommandHandlers(command_controller) {\n  _.each(handlers, function (handler, handler_command) {\n    command_controller.addHandler(handler_command, handler);\n  });\n};","'use strict';\n\nmodule.exports.Command = require('./command');\nmodule.exports.CommandHandler = require('./handler');","'use strict';\n/* eslint-disable quote-props */\n\nmodule.exports = {\n  '001': 'RPL_WELCOME',\n  '002': 'RPL_YOURHOST',\n  '003': 'RPL_CREATED',\n  '004': 'RPL_MYINFO',\n  '005': 'RPL_ISUPPORT',\n  '006': 'RPL_MAPMORE',\n  '007': 'RPL_MAPEND',\n  '008': 'RPL_SNOMASK',\n  '015': 'RPL_MAP',\n  '017': 'RPL_MAPEND',\n  '200': 'RPL_TRACELINK',\n  '201': 'RPL_TRACECONNECTING',\n  '202': 'RPL_TRACEHANDSHAKE',\n  '203': 'RPL_TRACEUNKNOWN',\n  '204': 'RPL_TRACEOPERATOR',\n  '205': 'RPL_TRACEUSER',\n  '206': 'RPL_TRACESERVER',\n  '207': 'RPL_TRACESERVICE',\n  '208': 'RPL_TRACENEWTYPE',\n  '209': 'RPL_TRACECLASS',\n  '210': 'RPL_TRACERECONNECT',\n  '211': 'RPL_STATSLINKINFO',\n  '212': 'RPL_STATSCOMMANDS',\n  '213': 'RPL_STATSCLINE',\n  '214': 'RPL_STATSNLINE',\n  '215': 'RPL_STATSILINE',\n  '216': 'RPL_STATSKLINE',\n  '217': 'RPL_STATSPLINE',\n  '218': 'RPL_STATSYLINE',\n  '219': 'RPL_ENDOFSTATS',\n  '220': 'RPL_STATSBLINE',\n  '221': 'RPL_UMODEIS',\n  '222': 'RPL_SQLINE_NICK',\n  '223': 'RPL_STATS_E',\n  '224': 'RPL_STATS_D',\n  '229': 'RPL_SPAMFILTER',\n  '231': 'RPL_SERVICEINFO',\n  '232': 'RPL_ENDOFSERVICES',\n  '233': 'RPL_SERVICE',\n  '234': 'RPL_SERVLIST',\n  '235': 'RPL_SERVLISTEND',\n  '241': 'RPL_STATSLLINE',\n  '242': 'RPL_STATSUPTIME',\n  '243': 'RPL_STATSOLINE',\n  '244': 'RPL_STATSHLINE',\n  '245': 'RPL_STATSSLINE',\n  '246': 'RPL_STATSGLINE',\n  '247': 'RPL_STATSXLINE',\n  '248': 'RPL_STATSULINE',\n  '249': 'RPL_STATSDEBUG',\n  '250': 'RPL_STATSCONN',\n  '251': 'RPL_LUSERCLIENT',\n  '252': 'RPL_LUSEROP',\n  '253': 'RPL_LUSERUNKNOWN',\n  '254': 'RPL_LUSERCHANNELS',\n  '255': 'RPL_LUSERME',\n  '256': 'RPL_ADMINME',\n  '257': 'RPL_ADMINLOC1',\n  '258': 'RPL_ADMINLOC2',\n  '259': 'RPL_ADMINEMAIL',\n  '265': 'RPL_LOCALUSERS',\n  '266': 'RPL_GLOBALUSERS',\n  '276': 'RPL_WHOISCERTFP',\n  '290': 'RPL_HELPHDR',\n  '291': 'RPL_HELPOP',\n  '292': 'RPL_HELPTLR',\n  '301': 'RPL_AWAY',\n  '303': 'RPL_ISON',\n  '304': 'RPL_ZIPSTATS',\n  '305': 'RPL_UNAWAY',\n  '306': 'RPL_NOWAWAY',\n  '307': 'RPL_WHOISREGNICK',\n  '310': 'RPL_WHOISHELPOP',\n  '311': 'RPL_WHOISUSER',\n  '312': 'RPL_WHOISSERVER',\n  '313': 'RPL_WHOISOPERATOR',\n  '314': 'RPL_WHOWASUSER',\n  '315': 'RPL_ENDOFWHO',\n  '317': 'RPL_WHOISIDLE',\n  '318': 'RPL_ENDOFWHOIS',\n  '319': 'RPL_WHOISCHANNELS',\n  '320': 'RPL_WHOISSPECIAL',\n  '321': 'RPL_LISTSTART',\n  '322': 'RPL_LIST',\n  '323': 'RPL_LISTEND',\n  '324': 'RPL_CHANNELMODEIS',\n  '328': 'RPL_CHANNEL_URL',\n  '329': 'RPL_CREATIONTIME',\n  '330': 'RPL_WHOISACCOUNT',\n  '331': 'RPL_NOTOPIC',\n  '332': 'RPL_TOPIC',\n  '333': 'RPL_TOPICWHOTIME',\n  '335': 'RPL_WHOISBOT',\n  '338': 'RPL_WHOISACTUALLY',\n  '341': 'RPL_INVITING',\n  '344': 'RPL_WHOISCOUNTRY',\n  '346': 'RPL_INVITELIST',\n  '347': 'RPL_ENDOFINVITELIST',\n  '352': 'RPL_WHOREPLY',\n  '353': 'RPL_NAMEREPLY',\n  '354': 'RPL_WHOSPCRPL',\n  '364': 'RPL_LINKS',\n  '365': 'RPL_ENDOFLINKS',\n  '366': 'RPL_ENDOFNAMES',\n  '367': 'RPL_BANLIST',\n  '368': 'RPL_ENDOFBANLIST',\n  '369': 'RPL_ENDOFWHOWAS',\n  '371': 'RPL_INFO',\n  '372': 'RPL_MOTD',\n  '374': 'RPL_ENDOFINFO',\n  '375': 'RPL_MOTDSTART',\n  '376': 'RPL_ENDOFMOTD',\n  '378': 'RPL_WHOISHOST',\n  '379': 'RPL_WHOISMODES',\n  '381': 'RPL_NOWOPER',\n  '396': 'RPL_HOSTCLOAKING',\n  '401': 'ERR_NOSUCHNICK',\n  '402': 'ERR_NOSUCHSERVER',\n  '404': 'ERR_CANNOTSENDTOCHAN',\n  '405': 'ERR_TOOMANYCHANNELS',\n  '406': 'ERR_WASNOSUCHNICK',\n  '421': 'ERR_UNKNOWNCOMMAND',\n  '422': 'ERR_NOMOTD',\n  '423': 'ERR_NOADMININFO',\n  '432': 'ERR_ERRONEOUSNICKNAME',\n  '433': 'ERR_NICKNAMEINUSE',\n  '441': 'ERR_USERNOTINCHANNEL',\n  '442': 'ERR_NOTONCHANNEL',\n  '443': 'ERR_USERONCHANNEL',\n  '451': 'ERR_NOTREGISTERED',\n  '461': 'ERR_NOTENOUGHPARAMS',\n  '464': 'ERR_PASSWDMISMATCH',\n  '470': 'ERR_LINKCHANNEL',\n  '471': 'ERR_CHANNELISFULL',\n  '472': 'ERR_UNKNOWNMODE',\n  '473': 'ERR_INVITEONLYCHAN',\n  '474': 'ERR_BANNEDFROMCHAN',\n  '475': 'ERR_BADCHANNELKEY',\n  '481': 'ERR_NOPRIVILEGES',\n  '482': 'ERR_CHANOPRIVSNEEDED',\n  '483': 'ERR_CANTKILLSERVER',\n  '484': 'ERR_ISCHANSERVICE',\n  '485': 'ERR_ISREALSERVICE',\n  '491': 'ERR_NOOPERHOST',\n  '670': 'RPL_STARTTLS',\n  '671': 'RPL_WHOISSECURE',\n  '704': 'RPL_HELPSTART',\n  '705': 'RPL_HELPTXT',\n  '706': 'RPL_ENDOFHELP',\n  '900': 'RPL_LOGGEDIN',\n  '901': 'RPL_LOGGEDOUT',\n  '903': 'RPL_SASLLOGGEDIN',\n  '904': 'ERR_SASLNOTAUTHORISED',\n  '906': 'ERR_SASLABORTED',\n  '907': 'ERR_SASLALREADYAUTHED',\n  '972': 'ERR_CANNOTDOCOMMAND',\n  'WALLOPS': 'RPL_WALLOPS'\n};","'use strict';\n\nrequire(\"core-js/modules/es.symbol\");\n\nrequire(\"core-js/modules/es.symbol.description\");\n\nrequire(\"core-js/modules/es.symbol.iterator\");\n\nrequire(\"core-js/modules/es.array.for-each\");\n\nrequire(\"core-js/modules/es.array.iterator\");\n\nrequire(\"core-js/modules/es.array.slice\");\n\nrequire(\"core-js/modules/es.date.now\");\n\nrequire(\"core-js/modules/es.date.to-string\");\n\nrequire(\"core-js/modules/es.object.create\");\n\nrequire(\"core-js/modules/es.object.define-property\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of\");\n\nrequire(\"core-js/modules/es.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/es.reflect.construct\");\n\nrequire(\"core-js/modules/es.regexp.to-string\");\n\nrequire(\"core-js/modules/es.string.iterator\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator\");\n\nrequire(\"core-js/modules/web.timers\");\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar _ = {\n  pull: require('lodash/pull')\n};\n\nvar EventEmitter = require('eventemitter3');\n\nvar ircLineParser = require('./irclineparser');\n\nmodule.exports = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(Connection, _EventEmitter);\n\n  var _super = _createSuper(Connection);\n\n  function Connection(options) {\n    var _this;\n\n    _classCallCheck(this, Connection);\n\n    _this = _super.call(this);\n    _this.options = options || {};\n    _this.connected = false;\n    _this.requested_disconnect = false;\n    _this.reconnect_attempts = 0; // When an IRC connection was successfully registered.\n\n    _this.registered = false;\n    _this.transport = null;\n    _this._timers = [];\n    return _this;\n  }\n\n  _createClass(Connection, [{\n    key: \"debugOut\",\n    value: function debugOut(out) {\n      this.emit('debug', out);\n    }\n  }, {\n    key: \"registeredSuccessfully\",\n    value: function registeredSuccessfully() {\n      this.registered = Date.now();\n    }\n  }, {\n    key: \"connect\",\n    value: function connect(options) {\n      var that = this;\n\n      if (options) {\n        this.options = options;\n      }\n\n      options = this.options;\n      this.auto_reconnect = options.auto_reconnect || false;\n      this.auto_reconnect_max_retries = options.auto_reconnect_max_retries || 3;\n      this.auto_reconnect_max_wait = options.auto_reconnect_max_wait || 300000;\n\n      if (this.transport) {\n        this.clearTimers();\n        this.transport.removeAllListeners();\n        this.transport.disposeSocket();\n      }\n\n      this.transport = new options.transport(options);\n\n      if (!options.encoding || !this.setEncoding(options.encoding)) {\n        this.setEncoding('utf8');\n      }\n\n      bindTransportEvents(this.transport);\n      this.registered = false;\n      this.requested_disconnect = false;\n      this.emit('connecting');\n      this.transport.connect();\n\n      function bindTransportEvents(transport) {\n        transport.on('open', socketOpen);\n        transport.on('line', socketLine);\n        transport.on('close', socketClose);\n        transport.on('debug', transportDebug);\n        transport.on('extra', transportExtra);\n      }\n\n      function transportDebug(out) {\n        that.debugOut(out);\n      }\n\n      function transportExtra() {\n        // Some transports may emit extra events\n        that.emit.apply(that, arguments);\n      } // Called when the socket is connected and ready to start sending/receiving data.\n\n\n      function socketOpen() {\n        that.debugOut('Socket fully connected');\n        that.reconnect_attempts = 0;\n        that.connected = true;\n        that.emit('socket connected');\n      }\n\n      function socketLine(line) {\n        that.addReadBuffer(line);\n      }\n\n      function socketClose(err) {\n        var was_connected = that.connected;\n        var should_reconnect = false;\n        var safely_registered = false;\n        var registered_ms_ago = Date.now() - that.registered; // Some networks use aKills which kill a user after succesfully\n        // registering instead of a ban, so we must wait some time after\n        // being registered to be sure that we are connected properly.\n\n        safely_registered = that.registered !== false && registered_ms_ago > 5000;\n        that.debugOut('Socket closed. was_connected=' + was_connected + ' safely_registered=' + safely_registered + ' requested_disconnect=' + that.requested_disconnect);\n        that.connected = false;\n        that.clearTimers();\n        that.emit('socket close', err);\n\n        if (that.requested_disconnect || !that.auto_reconnect) {\n          should_reconnect = false; // If trying to reconnect, continue with it\n        } else if (that.reconnect_attempts && that.reconnect_attempts < that.auto_reconnect_max_retries) {\n          should_reconnect = true; // If we were originally connected OK, reconnect\n        } else if (was_connected && safely_registered) {\n          should_reconnect = true;\n        } else {\n          should_reconnect = false;\n        }\n\n        if (should_reconnect) {\n          var reconnect_wait = that.calculateExponentialBackoff();\n          that.reconnect_attempts++;\n          that.emit('reconnecting', {\n            attempt: that.reconnect_attempts,\n            max_retries: that.auto_reconnect_max_retries,\n            wait: reconnect_wait\n          });\n          that.debugOut('Scheduling reconnect. Attempt: ' + that.reconnect_attempts + '/' + that.auto_reconnect_max_retries + ' Wait: ' + reconnect_wait + 'ms');\n          that.setTimeout(function () {\n            return that.connect();\n          }, reconnect_wait);\n        } else {\n          that.transport.removeAllListeners();\n          that.emit('close', !!err);\n          that.reconnect_attempts = 0;\n        }\n      }\n    }\n  }, {\n    key: \"calculateExponentialBackoff\",\n    value: function calculateExponentialBackoff() {\n      var jitter = 1000 + Math.floor(Math.random() * 5000);\n      var attempts = Math.min(this.reconnect_attempts, 30);\n      var time = 1000 * Math.pow(2, attempts);\n      return Math.min(time, this.auto_reconnect_max_wait) + jitter;\n    }\n  }, {\n    key: \"addReadBuffer\",\n    value: function addReadBuffer(line) {\n      var message = ircLineParser(line);\n      this.emit('raw', {\n        line: line,\n        from_server: true\n      });\n      this.emit('message', message, line);\n    }\n  }, {\n    key: \"write\",\n    value: function write(data, callback) {\n      if (!this.connected || this.requested_disconnect) {\n        this.debugOut('write() called when not connected');\n\n        if (callback) {\n          setTimeout(callback, 0); // fire in next tick\n        }\n\n        return false;\n      }\n\n      this.emit('raw', {\n        line: data,\n        from_server: false\n      });\n      return this.transport.writeLine(data, callback);\n    }\n    /**\n     * Create and keep track of all timers so they can be easily removed\n     */\n\n  }, {\n    key: \"setTimeout\",\n    value: function (_setTimeout) {\n      function setTimeout() {\n        return _setTimeout.apply(this, arguments);\n      }\n\n      setTimeout.toString = function () {\n        return _setTimeout.toString();\n      };\n\n      return setTimeout;\n    }(function ()\n    /* fn, length, argN */\n    {\n      var that = this;\n      var tmr = null;\n      var args = Array.prototype.slice.call(arguments, 0);\n      var callback = args[0];\n\n      args[0] = function () {\n        _.pull(that._timers, tmr);\n\n        callback.apply(null, args);\n      };\n\n      tmr = setTimeout.apply(null, args);\n\n      this._timers.push(tmr);\n\n      return tmr;\n    })\n  }, {\n    key: \"clearTimeout\",\n    value: function (_clearTimeout) {\n      function clearTimeout(_x) {\n        return _clearTimeout.apply(this, arguments);\n      }\n\n      clearTimeout.toString = function () {\n        return _clearTimeout.toString();\n      };\n\n      return clearTimeout;\n    }(function (tmr) {\n      clearTimeout(tmr);\n\n      _.pull(this._timers, tmr);\n    })\n  }, {\n    key: \"clearTimers\",\n    value: function clearTimers() {\n      this._timers.forEach(function (tmr) {\n        clearTimeout(tmr);\n      });\n\n      this._timers = [];\n    }\n    /**\n     * Close the connection to the IRCd after forcing one last line\n     */\n\n  }, {\n    key: \"end\",\n    value: function end(data, had_error) {\n      var that = this;\n      this.debugOut('Connection.end() connected=' + this.connected + ' with data=' + !!data + ' had_error=' + !!had_error);\n\n      if (this.connected && data) {\n        // Once the last bit of data has been sent, then re-run this function to close the socket\n        this.write(data, function () {\n          that.end(null, had_error);\n        });\n        return;\n      } // Shutdowns of the connection may be caused by errors like ping timeouts, which\n      // are not requested by the user so we leave requested_disconnect as false to make sure any\n      // reconnects happen.\n\n\n      if (!had_error) {\n        this.requested_disconnect = true;\n        this.clearTimers();\n      }\n\n      if (this.transport) {\n        this.transport.close(!!had_error);\n      }\n    }\n  }, {\n    key: \"setEncoding\",\n    value: function setEncoding(encoding) {\n      this.debugOut('Connection.setEncoding() encoding=' + encoding);\n\n      if (this.transport) {\n        return this.transport.setEncoding(encoding);\n      }\n    }\n  }]);\n\n  return Connection;\n}(EventEmitter);","'use strict';\n\nrequire(\"core-js/modules/es.array.index-of\");\n\nrequire(\"core-js/modules/es.array.slice\");\n\nvar Helper = {\n  parseMask: parseMask,\n  splitOnce: splitOnce\n};\nmodule.exports = Helper;\n\nfunction parseMask(mask) {\n  var nick = '';\n  var user = '';\n  var host = '';\n  var sep1 = mask.indexOf('!');\n  var sep2 = mask.indexOf('@');\n\n  if (sep1 === -1 && sep2 === -1) {\n    // something\n    if (mask.indexOf('.') > -1) {\n      host = mask;\n    } else {\n      nick = mask;\n    }\n  } else if (sep1 === -1 && sep2 !== -1) {\n    // something@something\n    nick = mask.substring(0, sep2);\n    host = mask.substring(sep2 + 1);\n  } else if (sep1 !== -1 && sep2 === -1) {\n    // something!something\n    nick = mask.substring(0, sep1);\n    user = mask.substring(sep1 + 1);\n  } else {\n    // something!something@something\n    nick = mask.substring(0, sep1);\n    user = mask.substring(sep1 + 1, sep2);\n    host = mask.substring(sep2 + 1);\n  }\n\n  return {\n    nick: nick,\n    user: user,\n    host: host\n  };\n}\n\nfunction splitOnce(input, separator) {\n  if (typeof input !== 'string' || typeof separator !== 'string') {\n    throw new TypeError('input and separator must be strings');\n  }\n\n  var splitPos;\n\n  if (separator === '') {\n    // special handling required for empty string as separator\n    // cannot match '' at start, so start searching after first character\n    splitPos = input.indexOf(separator, 1);\n\n    if (splitPos === input.length) {\n      // cannot match '' at end, so if that's all we found, act like we found nothing\n      splitPos = -1;\n    }\n  } else {\n    // normal non-zero-length separator\n    splitPos = input.indexOf(separator);\n  } // no separator found\n\n\n  if (splitPos < 0) {\n    return [input];\n  } // the normal case: split around first instance of separator\n\n\n  return [input.slice(0, splitPos), input.slice(splitPos + separator.length)];\n}"],"sourceRoot":""}