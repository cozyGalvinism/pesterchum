(self.webpackChunkpesterchum=self.webpackChunkpesterchum||[]).push([[273],{9229:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function o(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,o,i,s){if("function"!=typeof o)throw new TypeError("The listener must be a function");var a=new r(o,i||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function a(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,o,r=[];if(0===this._eventsCount)return r;for(o in e=this._events)t.call(e,o)&&r.push(n?o.slice(1):o);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=n?n+e:e,o=this._events[t];if(!o)return[];if(o.fn)return[o.fn];for(var r=0,i=o.length,s=new Array(i);r<i;r++)s[r]=o[r].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,o=this._events[t];return o?o.fn?1:o.length:0},a.prototype.emit=function(e,t,o,r,i,s){var a=n?n+e:e;if(!this._events[a])return!1;var c,u,f=this._events[a],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,t),!0;case 3:return f.fn.call(f.context,t,o),!0;case 4:return f.fn.call(f.context,t,o,r),!0;case 5:return f.fn.call(f.context,t,o,r,i),!0;case 6:return f.fn.call(f.context,t,o,r,i,s),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];f.fn.apply(f.context,c)}else{var h,p=f.length;for(u=0;u<p;u++)switch(f[u].once&&this.removeListener(e,f[u].fn,void 0,!0),l){case 1:f[u].fn.call(f[u].context);break;case 2:f[u].fn.call(f[u].context,t);break;case 3:f[u].fn.call(f[u].context,t,o);break;case 4:f[u].fn.call(f[u].context,t,o,r);break;default:if(!c)for(h=1,c=new Array(l-1);h<l;h++)c[h-1]=arguments[h];f[u].fn.apply(f[u].context,c)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,o,r){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||r&&!a.once||o&&a.context!==o||s(this,i);else{for(var c=0,u=[],f=a.length;c<f;c++)(a[c].fn!==t||r&&!a[c].once||o&&a[c].context!==o)&&u.push(a[c]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new o,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},9822:function(){!function(e){function t(){}function n(e,t){if(e=void 0===e?"utf-8":e,t=void 0===t?{fatal:!1}:t,-1===r.indexOf(e.toLowerCase()))throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+e+"') is invalid.");if(t.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function o(e){for(var t=0,n=Math.min(65536,e.length+1),o=new Uint16Array(n),r=[],i=0;;){var s=t<e.length;if(!s||i>=n-1){if(r.push(String.fromCharCode.apply(null,o.subarray(0,i))),!s)return r.join("");e=e.subarray(t),i=t=0}if(0==(128&(s=e[t++])))o[i++]=s;else if(192==(224&s)){var a=63&e[t++];o[i++]=(31&s)<<6|a}else if(224==(240&s)){a=63&e[t++];var c=63&e[t++];o[i++]=(31&s)<<12|a<<6|c}else 240==(248&s)&&(65535<(s=(7&s)<<18|(a=63&e[t++])<<12|(c=63&e[t++])<<6|63&e[t++])&&(s-=65536,o[i++]=s>>>10&1023|55296,s=56320|1023&s),o[i++]=s)}}if(e.TextEncoder&&e.TextDecoder)return!1;var r=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(t.prototype,"encoding",{value:"utf-8"}),t.prototype.encode=function(e,t){if((t=void 0===t?{stream:!1}:t).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");t=0;for(var n=e.length,o=0,r=Math.max(32,n+(n>>>1)+7),i=new Uint8Array(r>>>3<<3);t<n;){var s=e.charCodeAt(t++);if(55296<=s&&56319>=s){if(t<n){var a=e.charCodeAt(t);56320==(64512&a)&&(++t,s=((1023&s)<<10)+(1023&a)+65536)}if(55296<=s&&56319>=s)continue}if(o+4>i.length&&(r+=8,r=(r*=1+t/e.length*2)>>>3<<3,(a=new Uint8Array(r)).set(i),i=a),0==(4294967168&s))i[o++]=s;else{if(0==(4294965248&s))i[o++]=s>>>6&31|192;else if(0==(4294901760&s))i[o++]=s>>>12&15|224,i[o++]=s>>>6&63|128;else{if(0!=(4292870144&s))continue;i[o++]=s>>>18&7|240,i[o++]=s>>>12&63|128,i[o++]=s>>>6&63|128}i[o++]=63&s|128}}return i.slice?i.slice(0,o):i.subarray(0,o)},Object.defineProperty(n.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(n.prototype,"fatal",{value:!1}),Object.defineProperty(n.prototype,"ignoreBOM",{value:!1});var i=o;"function"==typeof Buffer&&Buffer.from?i=function(e){return Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf-8")}:"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&(i=function(e){var t=URL.createObjectURL(new Blob([e],{type:"text/plain;charset=UTF-8"}));try{var n=new XMLHttpRequest;return n.open("GET",t,!1),n.send(),n.responseText}catch(t){return o(e)}finally{URL.revokeObjectURL(t)}}),n.prototype.decode=function(e,t){if((t=void 0===t?{stream:!1}:t).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return e=e instanceof Uint8Array?e:e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer):new Uint8Array(e),i(e)},e.TextEncoder=t,e.TextDecoder=n}("undefined"!=typeof window?window:"undefined"!=typeof global?global:this)},4332:(e,t,n)=>{"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n(2004),n(8407),n(8288),n(8833),n(7715),n(5677),n(7441),n(5298),n(7469),n(4458),n(4649),n(6394),n(4669),n(2129),n(4655);var i={partial:n(7506),filter:n(9045),find:n(5066),each:n(6270),pull:n(2695),extend:n(2518)},s=n(791).Duplex;e.exports=function(){function e(t,n,o){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.irc_client=t,this.name=n,this.say=i.partial(t.say.bind(t),n),this.notice=i.partial(t.notice.bind(t),n),this.part=i.partial(t.part.bind(t),n),this.join=i.partial(t.join.bind(t),n),this.mode=i.partial(t.mode.bind(t),n),this.banlist=i.partial(t.banlist.bind(t),n),this.ban=i.partial(t.ban.bind(t),n),this.unban=i.partial(t.unban.bind(t),n),this.users=[],t.on("userlist",(function(e){e.channel.toLowerCase()===r.name.toLowerCase()&&(r.users=e.users)})),t.on("join",(function(e){e.channel===r.name&&r.users.push(e)})),t.on("part",(function(e){e.channel===r.name&&(r.users=i.filter(r.users,(function(t){return t.nick.toLowerCase()!==e.nick.toLowerCase()})))})),t.on("kick",(function(e){e.channel===r.name&&(r.users=i.filter(r.users,(function(t){return t.nick.toLowerCase()!==e.kicked.toLowerCase()})))})),t.on("quit",(function(e){r.users=i.filter(r.users,(function(t){return t.nick.toLowerCase()!==e.nick.toLowerCase()}))})),t.on("nick",(function(e){i.find(r.users,(function(t){if(t.nick.toLowerCase()===e.nick.toLowerCase())return t.nick=e.new_nick,!0}))})),t.on("mode",(function(e){e.target.toLowerCase()===r.name.toLowerCase()&&i.each(e.modes,(function(e){if(i.find(t.network.options.PREFIX,{mode:e.mode[1]})){var n=i.find(r.users,(function(t){return t.nick.toLowerCase()===e.param.toLowerCase()}));if(!n)return;"+"===e.mode[0]?(n.modes=n.modes||[],n.modes.push(e.mode[1])):i.pull(n.modes,e.mode[1])}}))})),this.join(o)}var t,n;return t=e,(n=[{key:"relay",value:function(e,t){t=i.extend({one_way:!1,replay_nicks:!0},t),"string"==typeof e&&(e=this.irc_client.channel(e));var n=this.stream(t),o=e.stream(t);n.pipe(o),t.one_way||o.pipe(n)}},{key:"stream",value:function(e){var t=this,n=[],r=!1,i=new s({objectMode:!0,write:function(n,r,i){"object"===o(n)&&"string"==typeof n.message&&(n=e.replay_nicks?"<"+n.nick+"> "+n.message:n.message),t.say(n.toString()),i()},read:function(){for(r=!0;n.length>0;){var e=n.shift();if(!1===i.push(e)){r=!1;break}}}});return this.irc_client.on("privmsg",(function(e){e.target.toLowerCase()===t.name.toLowerCase()&&(n.push(e),r&&i._read())})),i}},{key:"updateUsers",value:function(e){var t=this;this.irc_client.on("userlist",(function n(o){o.channel.toLowerCase()===t.name.toLowerCase()&&(t.irc_client.removeListener("userlist",n),"function"==typeof e&&e(t))})),this.irc_client.raw("NAMES",this.name)}}])&&r(t.prototype,n),e}()},3769:(e,t,n)=>{"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(2004),n(8407),n(8288),n(1646),n(8833),n(7715),n(5680),n(3675),n(7228),n(1301),n(5677),n(7441),n(288),n(2609),n(5298),n(7469),n(4458),n(4334),n(4649),n(5101),n(9751),n(7867),n(6394),n(3080),n(2322),n(4669),n(2129),n(5017),n(9268),n(5090),n(4655);var f={extend:n(2518),find:n(5066),each:n(6270),defer:n(9353),bind:n(1496)},l=n(9229),h=n(1765),p=n(3775).CommandHandler,y=n(4637),d=n(7402),v=n(8164),m=n(4953),w=n(4332),g=n(4125).lineBreak,k=n(574),b=null;e.exports=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(C,e);var t,n,o,i,l,_=(i=C,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(i);if(l){var n=u(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return c(this,e)});function C(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,C),(t=_.call(this)).request_extra_caps=[],t.options=e||null,t.createStructure(),t}return t=C,o=[{key:"setDefaultTransport",value:function(e){b=e}}],(n=[{key:"_applyDefaultOptions",value:function(e){for(var t={nick:"ircbot",username:"ircbot",gecos:"ircbot",encoding:"utf8",version:"node.js irc-framework",enable_chghost:!1,enable_setname:!1,enable_echomessage:!1,auto_reconnect:!0,auto_reconnect_wait:4e3,auto_reconnect_max_retries:3,ping_interval:30,ping_timeout:120,message_max_length:350,transport:b},n=Object.keys(t),o=0;o<n.length;o++)void 0===e[n[o]]&&(e[n[o]]=t[n[o]]);return e}},{key:"createStructure",value:function(){var e=this;e.raw_middleware=new h,e.parsed_middleware=new h,e.connection=new d(e.options),e.network=new v,e.user=new m,e.command_handler=new p(e.connection,e.network),e.addCommandHandlerListeners(),["connecting","reconnecting","close","socket close","socket error","raw socket connected","debug","raw"].forEach((function(t){e.connection.on(t,(function(){var n=Array.prototype.slice.call(arguments);e.emit.apply(e,[t].concat(n))}))})),e.connection.on("socket connected",(function(){e.emit("socket connected"),e.registerToNetwork(),e.startPeriodicPing()})),e.connection.on("connecting",(function(){e.network.cap.negotiating=!1,e.network.cap.requested=[],e.command_handler.resetCache()})),e.connection.on("message",(function(t,n){e.raw_middleware.handle([t.command,t,n,e],(function(n){n?console.log(n.stack):e.command_handler.dispatch(t)}))})),e.on("away",(function(t){t.nick.toLowerCase()===e.user.nick.toLowerCase()&&(e.user.away=!0)})),e.on("back",(function(t){t.nick.toLowerCase()===e.user.nick.toLowerCase()&&(e.user.away=!1)})),e.proxyIrcEvents(),Object.defineProperty(e,"connected",{enumerable:!0,get:function(){return e.connection&&e.connection.connected}})}},{key:"requestCap",value:function(e){this.request_extra_caps=this.request_extra_caps.concat(e)}},{key:"use",value:function(e){return e(this,this.raw_middleware,this.parsed_middleware),this}},{key:"connect",value:function(e){var t=this;if(!e&&!t.options)throw new Error("Options object missing from IrcClient.connect()");e?t.options=e:e=t.options,t._applyDefaultOptions(e),t.connection&&t.connection.connected&&(t.debugOut("connect() called when already connected"),t.connection.end()),t.user.nick=e.nick,t.user.username=e.username,t.user.gecos=e.gecos,t.command_handler.requestExtraCaps(t.request_extra_caps),t.connection.connect(e)}},{key:"proxyIrcEvents",value:function(){var e=this;this.command_handler.on("all",(function(t,n){e.resetPingTimeoutTimer(),["privmsg","notice","action"].indexOf(t)>-1&&(n.reply=function(t){var o=n.target===e.user.nick?n.nick:n.target;e.say(o,t)},e.command_handler.emit("message",f.extend({type:t},n))),e.parsed_middleware.handle([t,n,e],(function(o){o?console.error(o.stack):e.emit(t,n)}))}))}},{key:"addCommandHandlerListeners",value:function(){var e=this,t=this.command_handler;t.on("nick",(function(t){if(e.user.nick===t.nick){if(t.new_nick.match(/^\d/))return;e.user.nick=t.new_nick}})),t.on("mode",(function(t){e.user.nick===t.target&&t.modes.forEach((function(t){e.user.toggleModes(t.mode)}))})),t.on("wholist",(function(t){var n=f.find(t.users,{nick:e.user.nick});n&&(e.user.username=n.ident,e.user.host=n.hostname)})),t.on("registered",(function(t){e.user.nick=t.nick,e.connection.registeredSuccessfully(),e.emit("connected",t)})),t.on("displayed host",(function(t){e.user.nick===t.nick&&(e.user.host=t.host)})),t.on("error",(function(e){}))}},{key:"registerToNetwork",value:function(){var e=this.options.webirc;if(e){var t=String(e.address);":"===t[0]&&(t="0"+t),this.raw("WEBIRC",e.password,e.username,e.hostname,t,k.encode(e.options||{}," "))}this.raw("CAP LS 302"),this.options.password&&this.raw("PASS",this.options.password),this.raw("NICK",this.user.nick),this.raw("USER",this.options.username,0,"*",this.user.gecos)}},{key:"startPeriodicPing",value:function(){var e=this,t=null;function n(){e.debugOut("Ping timeout ("+e.options.ping_timeout+" seconds)"),e.emit("ping timeout");var t=e.rawString("QUIT","Ping timeout ("+e.options.ping_timeout+" seconds)");e.connection.end(t,!0)}e.options.ping_interval<=0||e.options.ping_timeout<=0||(this.resetPingTimeoutTimer=function(){e.connection.clearTimeout(t),t=e.connection.setTimeout(n,1e3*e.options.ping_timeout)},e.connection.setTimeout((function t(){e.ping(),e.connection.setTimeout(t,1e3*e.options.ping_interval)}),1e3*e.options.ping_interval))}},{key:"resetPingTimeoutTimer",value:function(){}},{key:"debugOut",value:function(e){this.emit("debug","Client "+e)}},{key:"raw",value:function(e){e instanceof y?this.connection.write(e.to1459()):this.connection.write(this.rawString.apply(this,arguments))}},{key:"rawString",value:function(e){var t;return(t=(t=e.constructor===Array?e:Array.prototype.slice.call(arguments,0)).filter((function(e){return"number"==typeof e||"string"==typeof e}))).length>1&&t[t.length-1].match(/^:|\s/)&&(t[t.length-1]=":"+t[t.length-1]),t.join(" ")}},{key:"quit",value:function(e){this.connection.end(this.rawString("QUIT",e))}},{key:"ping",value:function(e){this.raw("PING",e||"kiwitime-"+Date.now())}},{key:"changeNick",value:function(e){this.raw("NICK",e)}},{key:"sendMessage",value:function(e,t,n){var o=this;n.split(/\r\n|\n|\r/).filter((function(e){return e})).forEach((function(n){r(g(n,{bytes:o.options.message_max_length,allowBreakingWords:!0,allowBreakingGraphemes:!0})).forEach((function(n){return o.raw(e,t,n)}))}))}},{key:"say",value:function(e,t){return this.sendMessage("PRIVMSG",e,t)}},{key:"notice",value:function(e,t){return this.sendMessage("NOTICE",e,t)}},{key:"tagmsg",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new y("TAGMSG",e);n.tags=t,this.raw(n)}},{key:"join",value:function(e,t){var n=["JOIN",e];t&&n.push(t),this.raw(n)}},{key:"part",value:function(e,t){var n=["PART",e];t&&n.push(t),this.raw(n)}},{key:"mode",value:function(e,t,n){var o=["MODE",e,t];n&&(Array.isArray(n)?o=o.concat(n):o.push(n)),this.raw(o)}},{key:"inviteList",value:function(e,t){var n=this,o=this.network.supports("INVEX"),r="I";function i(n){n.channel.toLowerCase()===e.toLowerCase()&&(a(),"function"==typeof t&&t(n))}function s(e){"chanop_privs_needed"===e.error&&(a(),"function"==typeof t&&t(null))}function a(){n.removeListener("inviteList",i),n.removeListener("irc error",s)}"string"==typeof o&&o&&(r=o),n.on("inviteList",i),n.on("irc error",s),this.raw(["MODE",e,r])}},{key:"invite",value:function(e,t){var n=["INVITE",t,e];this.raw(n)}},{key:"addInvite",value:function(e,t){var n="I",o=this.network.supports("INVEX");"string"==typeof o&&(n=o);var r=["MODE",e,"+"+n,t];this.raw(r)}},{key:"removeInvite",value:function(e,t){var n="I",o=this.network.supports("INVEX");"string"==typeof o&&(n=o);var r=["MODE",e,"-"+n,t];this.raw(r)}},{key:"banlist",value:function(e,t){var n=this,o=["MODE",e,"b"];this.on("banlist",(function o(r){r.channel.toLowerCase()===e.toLowerCase()&&(n.removeListener("banlist",o),"function"==typeof t&&t(r))})),this.raw(o)}},{key:"ban",value:function(e,t){var n=["MODE",e,"+b",t];this.raw(n)}},{key:"unban",value:function(e,t){var n=["MODE",e,"-b",t];this.raw(n)}},{key:"setTopic",value:function(e,t){this.raw("TOPIC",e,t)}},{key:"ctcpRequest",value:function(e,t){var n=Array.prototype.slice.call(arguments,1);n[0]=n[0].toUpperCase(),this.raw("PRIVMSG",e,String.fromCharCode(1)+n.join(" ")+String.fromCharCode(1))}},{key:"ctcpResponse",value:function(e,t){var n=Array.prototype.slice.call(arguments,1);n[0]=n[0].toUpperCase(),this.raw("NOTICE",e,String.fromCharCode(1)+n.join(" ")+String.fromCharCode(1))}},{key:"action",value:function(e,t){var n=this,o="ACTION",i=this.options.message_max_length-(o.length+3),s=r(g(t,{bytes:i,allowBreakingWords:!0,allowBreakingGraphemes:!0}));return s.forEach((function(t){n.ctcpRequest(e,o,t)})),s}},{key:"whois",value:function(e,t){var n,o=this,r=["WHOIS"];f.each(arguments,(function(e){"function"==typeof e?n=e:r.push(e)})),this.on("whois",(function t(r){r.nick.toLowerCase()===e.toLowerCase()&&(o.removeListener("whois",t),"function"==typeof n&&n(r))})),this.raw(r)}},{key:"whowas",value:function(e,t){var n,o=this,r=["WHOWAS"];f.each(arguments,(function(e){"function"==typeof e?n=e:r.push(e)})),this.on("whowas",(function t(r){r.nick.toLowerCase()===e.toLowerCase()&&(o.removeListener("whowas",t),"function"==typeof n&&n(r))})),this.raw(r)}},{key:"who",value:function(e,t){this.who_queue||(this.who_queue=[]),this.who_queue.push([e,t]),this.processNextWhoQueue()}},{key:"processNextWhoQueue",value:function(){var e=this;if(0!==e.who_queue.length&&!e.who_queue.is_running){e.who_queue.is_running=!0;var t=e.who_queue.shift(),n=t[0],o=t[1];if(!n||"string"!=typeof n)return"function"==typeof o&&f.defer(o,{target:n,users:[]}),e.who_queue.is_running=!1,void f.defer(f.bind(e.processNextWhoQueue,e));e.on("wholist",(function t(r){e.removeListener("wholist",t),e.who_queue.is_running=!1,f.defer(f.bind(e.processNextWhoQueue,e)),"function"==typeof o&&o({target:n,users:r.users})})),e.network.supports("whox")?e.raw("WHO",n,"%cuhsnfdaor"):e.raw("WHO",n)}}},{key:"list",value:function(){var e=Array.prototype.slice.call(arguments);this.command_handler.cache("chanlist").channels=[],e.unshift("LIST"),this.raw(e)}},{key:"channel",value:function(e){return new w(this,e)}},{key:"match",value:function(e,t,n){var o=this,r=function(n){n.message.match(e)&&t(n)};return this.on(n||"message",r),{stop:function(){o.removeListener(n||"message",r)}}}},{key:"matchNotice",value:function(e,t){return this.match(e,t,"notice")}},{key:"matchMessage",value:function(e,t){return this.match(e,t,"privmsg")}},{key:"matchAction",value:function(e,t){return this.match(e,t,"action")}},{key:"Message",get:function(){return y}}])&&s(t.prototype,n),o&&s(t,o),C}(l)}}]);
//# sourceMappingURL=273.js.map